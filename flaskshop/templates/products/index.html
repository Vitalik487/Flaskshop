{% extends "layout.html" %} {% block page_title %} product list {% endblock %} {% block content_class %}products-index-page{%
endblock content_class %} {% block content %}
<div class="row">
  <div class="col-lg-10 col-lg-offset-1">
    <div class="panel panel-default">
      <div class="panel-body">
        <div class="row">
          <form action="{{url_for('product.index')}}" class="form-inline search-form">
            <input type="text" class="form-control input-sm" name="search" placeholder="Search">
            <button class="btn btn-primary btn-sm">Search</button>
            <select name="order" class="form-control input-sm pull-right">
                <option value="">Order</option>
                <option value="price-asc">Price low to high</option>
                <option value="price-desc">Price high to low</option>
                <option value="sold_count-desc">Sold high to low</option>
                <option value="sold_count-asc">Sold low to high</option>
                <option value="rating-desc">Rating high to low</option>
                <option value="rating-asc">Rating low to high</option>
            </select>
          </form>
        </div>
        <div class="row products-list">
          {% for product in products %}
          <div class="col-xs-3 product-item">
            <div class="product-content">
              <div class="top">
                <div class="img">
                  <a href="{{ url_for('product.show', id=product.id) }}">
                    <img src="{{ product.image}}" alt="">
                  </a>
                </div>
                <div class="price">
                  <b>$</b>{{ product.price }}</div>
                <a href="{{ url_for('product.show', id=product.id) }}">{{ product.title }}</a>
              </div>
              <div class="bottom">
                  <div class="sold_count">Sold
                      <span>{{ product.sold_count }}</span>
                </div>
                  <div class="review_count">Reviews
                  <span>{{ product.review_count }}</span>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="pull-right">{{ macros.pagination_widget(pagination, '.index') }}</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block js %}
<script>
  $(document).ready(function () {
    $('.search-form select[name=order]').on('change', function() {
      $('.search-form').submit();
    });
  })
</script>
{% endblock %}