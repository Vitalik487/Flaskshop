{% extends "base.html" %}


{% block title %}
    Order {{ order }}
{% endblock %}

{% block breadcrumb %}
    <ul class="breadcrumbs list-unstyled">
        <li>
            <a href="{{ url_for('public.home') }}">
                Home
            </a>
        </li>
        <li>
            <a href="{{ url_for('account.index') }}">
                Your account
            </a>
        </li>
        <li>
            <a href="{{ order.get_absolute_url }}">
                Order {{ order }}
            </a>
        </li>
    </ul>
{% endblock breadcrumb %}



{% block content %}
    {# This view is available by just knowing url,          #}
    {# so we don't show all details (like shipping address) #}
    {# unless current user is owner of the order.           #}

    <div class="row order-details">
        <div class="col-lg-10 m-auto">
            <h2 class="order-details__header">
                Order {{ order }}: {{ order.status }}
            </h2>
            {% if not order.is_fully_paid %}
                {% if order.is_pre_authorized %}
                    <a href="" class="btn btn-link">
                        Payment details
                    </a>
                {% else %}
                    <a href="" class="btn primary">
                        Pay for order
                    </a>
                {% endif %}
            {% endif %}
            {% include "orders/_ordered_items_table.html" %}
            <div class="order-notes">
                {% if order.notes %}
                    <h2 class="order-notes__header">Notes</h2>
                    {% for note in order.notes %}
                        <small>
                            {#           TODO#}
                        </small>
                        <p>{{ note.content }}</p>
                    {% endfor %}
                {% endif %}
                {% if order.is_open %}
                    <form method="post" class="form-group">
                        <input type="submit" value="Submit" class="btn primary"/>
                    </form>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock content %}
